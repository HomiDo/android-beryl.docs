<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<TITLE>
IDatabaseUpdateScript (Beryl API)
</TITLE>


<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../beryl-style.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IDatabaseUpdateScript (Beryl API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/IDatabaseUpdateScript.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

			<script type="text/javascript" src="http://android-beryl.googlecode.com/hg/api/resources/jquery.js"></script>     
<script type="text/javascript" src="http://android-beryl.googlecode.com/hg/api/resources/jquery.beautyOfCode.js"></script> 
<script type="text/javascript">                                         
$.beautyOfCode.init({
      theme: 'Default',
			brushes: ['Java', 'Xml', 'Plain'],
			defaults: { gutter: false },
			ready: function() {
				$.beautyOfCode.beautifyAll();
			}
		});
 </script> 
			</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/beryl/database/DatabaseUtils.html" title="class in org.beryl.database"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/beryl/database/SqlOnlyCreateScript.html" title="class in org.beryl.database"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/beryl/database/IDatabaseUpdateScript.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="IDatabaseUpdateScript.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.beryl.database</FONT>
<BR>
Interface IDatabaseUpdateScript</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../org/beryl/database/DatabaseCreateScript.html" title="class in org.beryl.database">DatabaseCreateScript</A>, <A HREF="../../../org/beryl/database/DatabaseUpdateScript.html" title="class in org.beryl.database">DatabaseUpdateScript</A>, <A HREF="../../../org/beryl/database/SqlOnlyCreateScript.html" title="class in org.beryl.database">SqlOnlyCreateScript</A>, <A HREF="../../../org/beryl/database/SqlOnlyUpdateScript.html" title="class in org.beryl.database">SqlOnlyUpdateScript</A>, <A HREF="../../../org/beryl/web/cache/WebCacheOpenHelper.WebCacheCreateDatabaseScript.html" title="class in org.beryl.web.cache">WebCacheOpenHelper.WebCacheCreateDatabaseScript</A>, <A HREF="../../../org/beryl/web/cache/WebCacheOpenHelper.WebCacheUpdateScript_2.html" title="class in org.beryl.web.cache">WebCacheOpenHelper.WebCacheUpdateScript_2</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>IDatabaseUpdateScript</B></DL>
</PRE>

<P>
Contract for database update routines.
 Update scripts will only be called when the database detects that it needs to be upgraded.
 Scripts are guaranteed to run in sequential order and only need to assume that they will run from the previous 
 version of the database schema. IE: Version 5 script will run only against version 4 databases.
 An exception is the create script which will run from an empty database.
 
 Typically this interface is not implemented directly.
 Extend from either <A HREF="../../../org/beryl/database/DatabaseCreateScript.html" title="class in org.beryl.database"><CODE>DatabaseCreateScript</CODE></A> or <A HREF="../../../org/beryl/database/DatabaseUpdateScript.html" title="class in org.beryl.database"><CODE>DatabaseUpdateScript</CODE></A>.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/beryl/database/IDatabaseUpdateScript.html#onAfterSchemaUpdate(org.beryl.database.DatabaseUpdateParameters)">onAfterSchemaUpdate</A></B>(<A HREF="../../../org/beryl/database/DatabaseUpdateParameters.html" title="class in org.beryl.database">DatabaseUpdateParameters</A>&nbsp;params)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event handler for when the database's schema has been updated to this version.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/beryl/database/IDatabaseUpdateScript.html#onBeforeSchemaUpdate(org.beryl.database.DatabaseUpdateParameters)">onBeforeSchemaUpdate</A></B>(<A HREF="../../../org/beryl/database/DatabaseUpdateParameters.html" title="class in org.beryl.database">DatabaseUpdateParameters</A>&nbsp;params)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Event handler for when a database is about to be upgraded from the previous version.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/beryl/database/IDatabaseUpdateScript.html#updateSchema(org.beryl.database.DatabaseUpdateParameters)">updateSchema</A></B>(<A HREF="../../../org/beryl/database/DatabaseUpdateParameters.html" title="class in org.beryl.database">DatabaseUpdateParameters</A>&nbsp;params)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Handles the actual update of the database schema.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="onBeforeSchemaUpdate(org.beryl.database.DatabaseUpdateParameters)"><!-- --></A><H3>
onBeforeSchemaUpdate</H3>
<PRE>
void <B>onBeforeSchemaUpdate</B>(<A HREF="../../../org/beryl/database/DatabaseUpdateParameters.html" title="class in org.beryl.database">DatabaseUpdateParameters</A>&nbsp;params)</PRE>
<DL>
<DD>Event handler for when a database is about to be upgraded from the previous version.
 Called before the update schema patch is applied.
 Typically used to prepare or migrate data that would otherwise be corrupt when the new schema is applied.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="updateSchema(org.beryl.database.DatabaseUpdateParameters)"><!-- --></A><H3>
updateSchema</H3>
<PRE>
void <B>updateSchema</B>(<A HREF="../../../org/beryl/database/DatabaseUpdateParameters.html" title="class in org.beryl.database">DatabaseUpdateParameters</A>&nbsp;params)</PRE>
<DL>
<DD>Handles the actual update of the database schema.
 Typically the use of a <A HREF="../../../org/beryl/database/SqlScriptReader.html" title="class in org.beryl.database"><CODE>SqlScriptReader</CODE></A> and <A HREF="../../../org/beryl/database/SqlScriptRunner.html" title="class in org.beryl.database"><CODE>SqlScriptRunner</CODE></A> are used to apply the new schema from a sql file.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="onAfterSchemaUpdate(org.beryl.database.DatabaseUpdateParameters)"><!-- --></A><H3>
onAfterSchemaUpdate</H3>
<PRE>
void <B>onAfterSchemaUpdate</B>(<A HREF="../../../org/beryl/database/DatabaseUpdateParameters.html" title="class in org.beryl.database">DatabaseUpdateParameters</A>&nbsp;params)</PRE>
<DL>
<DD>Event handler for when the database's schema has been updated to this version.
 Use this to populate new data pertinent to this new version.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/IDatabaseUpdateScript.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

			<script type="text/javascript" src="http://android-beryl.googlecode.com/hg/api/resources/jquery.js"></script>     
<script type="text/javascript" src="http://android-beryl.googlecode.com/hg/api/resources/jquery.beautyOfCode.js"></script> 
<script type="text/javascript">                                         
$.beautyOfCode.init({
      theme: 'Default',
			brushes: ['Java', 'Xml', 'Plain'],
			defaults: { gutter: false },
			ready: function() {
				$.beautyOfCode.beautifyAll();
			}
		});
 </script> 
			</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/beryl/database/DatabaseUtils.html" title="class in org.beryl.database"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/beryl/database/SqlOnlyCreateScript.html" title="class in org.beryl.database"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/beryl/database/IDatabaseUpdateScript.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="IDatabaseUpdateScript.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
